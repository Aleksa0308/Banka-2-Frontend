<h2 mat-dialog-title>Dodaj agenta</h2>
<mat-dialog-content class="mat-typography size">
	<form [formGroup]="createAgentForm"
		  (ngSubmit)="addAgent()">
		<div>
			<mat-form-field class="full-width">
				<mat-label>Email</mat-label>
				<input
					matInput
					formControlName="email"
					type="email"
					name="email"
				/>
				<mat-error
					*ngIf="createAgentForm.get('email')?.hasError('required')"
				>
					Email je obavezan.
				</mat-error>
				<mat-error
					*ngIf="createAgentForm.get('email')?.hasError('invalidEmail')"
				>
					Pogrešan format email-a.
				</mat-error>
			</mat-form-field>

			<mat-form-field class="full-width">
				<mat-label>Datum rođenja</mat-label>
				<input
					matInput
					formControlName="dateOfBirth"
					[matDatepicker]="picker"
					name="dateOfBirth"
					placeholder="Izaberi datum"
				/>
				<mat-datepicker-toggle
					matSuffix
					[for]="picker"
				></mat-datepicker-toggle>
				<mat-datepicker #picker></mat-datepicker>
			</mat-form-field>

			<mat-form-field class="full-width">
				<mat-label>Broj telefona</mat-label>
				<input
					matInput
					formControlName="phone"
					name="phone"
				/>
				<mat-error
					*ngIf="createAgentForm.get('phone')?.hasError('required')"
				>
					Broj telefona je obavezan.
				</mat-error>
				<mat-error
					*ngIf="createAgentForm.get('phone')?.hasError('invalidPhoneNumber')"
				>
					Unesite validan broj telefona.
				</mat-error>
			</mat-form-field>

			<mat-form-field class="full-width">
				<mat-label>Adresa</mat-label>
				<input
					matInput
					formControlName="address"
					name="address"
				/>
			</mat-form-field>

			<mat-form-field class="full-width">
				<mat-label>Limit</mat-label>
				<input
					matInput
					formControlName="limit"
					name="limit"
					type="number"
				/>
			</mat-form-field>

			<mat-form-field class="full-width">
				<mat-label>Ostatak limita</mat-label>
				<input
					matInput
					formControlName="leftOfLimit"
					name="leftOfLimit"
					type="number"
				/>
			</mat-form-field>

			<mat-form-field class="full-width">
				<mat-label>Dozvole</mat-label>
				<mat-select formControlName="permissions" multiple='true'>
					<mat-option *ngFor="let permission of availablePermissions" [value]="permission">
						{{ permission }}
					</mat-option>
				</mat-select>
			</mat-form-field>
		</div>
	</form>
</mat-dialog-content>
<mat-dialog-actions align="end">
	<button
		mat-raised-button
		mat-dialog-close
		color="accent"
		cdkFocusInitial
		(click)="addAgent()"
	>
		Dodaj
	</button>
	<button
		mat-raised-button
		mat-dialog-close
		color="warn"
	>
		Zatvori
	</button>
</mat-dialog-actions>
